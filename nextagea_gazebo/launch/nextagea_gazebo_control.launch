<launch>
  <!-- Load joint controller configurations from YAML file to parameter server -->
  <rosparam file="$(find nextagea_gazebo)/config/nextagea_gazebo_control.yaml" command="load"/>

  <!-- load the controllers -->
  <node name="controller_spawner" pkg="controller_manager"
        type="spawner" respawn="false"
        output="screen" args="joint_state_controller
                              botharms_controller
                              head_controller
                              torso_controller"/>

  <!-- load the stopped controllers -->
  <!-- please run the controller switch script in nextagea_gazebo/scripts to switch to rarm/larm from both arm controller-->
  <node name="stopped_controller_spawner" pkg="controller_manager"
        type="spawner" respawn="false"
        output="screen" args="--stopped larm_controller
                                        rarm_controller"/>

  <node name="go_home" pkg="nextagea_gazebo"  type="go_home" />

  <!-- start self-collision checker -->
  <!-- use controller_type to identify whether using botharms/rarm/larm controller-->
  <arg name="controller_type" value="botharms"/>
  <!-- use collision_mode to select error/warn behaviour-->
  <arg name="collision_mode" value="error"/>
  <node name="self_collision_check" pkg="nextagea_gazebo" type="self_collision_check" output="screen" args="">
    <param name="controller_type" value="$(arg controller_type)"/>
    <param name="collision_mode" value="$(arg collision_mode)"/>
    <remap from="~traj_input" to="/collision_$(arg controller_type)_controller/command" />
    <remap from="~traj_output" to="/$(arg controller_type)_controller/command" />
    <remap from="~joint_state" to="/joint_states" />
  </node>
</launch>
